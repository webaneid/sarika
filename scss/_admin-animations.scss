/**
 * Admin Animations & Transitions
 *
 * Smooth, professional animations untuk modern admin feel.
 *
 * @package sarika
 */

// ============================================
// PAGE LOAD ANIMATIONS - LIGHTWEIGHT
// ============================================

// NO initial hiding state for performance
// Content shows immediately

// Optional subtle fade in
.sarika-animate-in {
  animation: sarika-fade-in 0.2s ease-out forwards;
}

@keyframes sarika-fade-in {
  from {
    opacity: 0.8;
  }
  to {
    opacity: 1;
  }
}

// ============================================
// PAGE TRANSITION ANIMATIONS
// ============================================

.sarika-page-exit {
  .wrap {
    animation: sarika-fade-out 0.3s ease-out forwards;
  }
}

@keyframes sarika-fade-out {
  to {
    opacity: 0;
    transform: translateY(-10px);
  }
}

// ============================================
// BUTTON RIPPLE EFFECT
// ============================================

.button,
.button-primary,
.button-secondary {
  position: relative;
  overflow: hidden;
}

.sarika-ripple {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  pointer-events: none;
  transform: scale(0);
  animation: sarika-ripple-animation 0.6s ease-out;
}

@keyframes sarika-ripple-animation {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

// ============================================
// NOTICE ANIMATIONS
// ============================================

.sarika-notice-animate {
  animation: sarika-notice-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes sarika-notice-slide-in {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.notice,
.updated,
.error {
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

// ============================================
// TABLE ROW HOVER ANIMATIONS
// ============================================

.widefat tbody tr,
.wp-list-table tbody tr {
  transition: all var(--sarika-transition-fast, 0.15s) ease;
  transform-origin: center;
}

// ============================================
// SKELETON LOADING
// ============================================

.sarika-skeleton-loading {
  position: relative;
  overflow: hidden;
  background: linear-gradient(
    90deg,
    rgba(var(--sarika-color-light-rgb, 241, 240, 234), 0.3) 0%,
    rgba(var(--sarika-color-light-rgb, 241, 240, 234), 0.5) 50%,
    rgba(var(--sarika-color-light-rgb, 241, 240, 234), 0.3) 100%
  );
  background-size: 200% 100%;
  animation: sarika-skeleton-shimmer 1.5s infinite;

  // Hide content during loading
  * {
    visibility: hidden;
  }
}

.sarika-skeleton-loaded {
  animation: sarika-fade-in 0.3s ease-out forwards;
}

@keyframes sarika-skeleton-shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

@keyframes sarika-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

// ============================================
// POSTBOX ANIMATIONS
// ============================================

.postbox {
  transition: all var(--sarika-transition-base, 0.2s) ease;

  &.closed {
    .inside {
      animation: sarika-collapse 0.3s ease-out;
    }
  }

  &:not(.closed) {
    .inside {
      animation: sarika-expand 0.3s ease-out;
    }
  }
}

@keyframes sarika-collapse {
  from {
    opacity: 1;
    max-height: 1000px;
  }
  to {
    opacity: 0;
    max-height: 0;
  }
}

@keyframes sarika-expand {
  from {
    opacity: 0;
    max-height: 0;
  }
  to {
    opacity: 1;
    max-height: 1000px;
  }
}

// ============================================
// STAT CARD ANIMATIONS
// ============================================

.sarika-stat-card {
  &__icon {
    transition: all var(--sarika-transition-base, 0.2s) ease;
  }

  &:hover {
    .sarika-stat-card__icon {
      transform: scale(1.05) rotate(5deg);
    }
  }
}

// ============================================
// PROGRESS BAR ANIMATIONS
// ============================================

.sarika-breakdown-progress__fill {
  transition: width 1s cubic-bezier(0.16, 1, 0.3, 1);
}

// ============================================
// TAB ANIMATIONS
// ============================================

.nav-tab-wrapper .nav-tab {
  transition: all var(--sarika-transition-fast, 0.15s) ease;
  position: relative;

  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background: var(--sarika-color-primary, #2d232e);
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    transform: translateX(-50%);
  }

  &.nav-tab-active::after,
  &:hover::after {
    width: 100%;
  }

  &:not(.nav-tab-active):hover {
    background: rgba(var(--sarika-color-primary-rgb, 45, 35, 46), 0.04);
  }
}

// ============================================
// FORM INPUT ANIMATIONS
// ============================================

input[type="text"],
input[type="password"],
input[type="email"],
input[type="number"],
input[type="search"],
input[type="tel"],
input[type="url"],
textarea,
select {
  transition: all var(--sarika-transition-base, 0.2s) ease;

  &:focus {
    animation: sarika-input-focus 0.3s ease-out;
  }
}

@keyframes sarika-input-focus {
  0% {
    box-shadow: 0 0 0 0 rgba(var(--sarika-color-primary-rgb, 45, 35, 46), 0.08);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(var(--sarika-color-primary-rgb, 45, 35, 46), 0.08);
  }
  100% {
    box-shadow: 0 0 0 4px rgba(var(--sarika-color-primary-rgb, 45, 35, 46), 0.08);
  }
}

// ============================================
// TOGGLE SWITCH ANIMATIONS
// ============================================

.sarika-toggle-slider {
  &::before {
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
}

.sarika-toggle input:checked + .sarika-toggle-slider::before {
  animation: sarika-toggle-bounce 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes sarika-toggle-bounce {
  0% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(26px);
  }
  100% {
    transform: translateX(22px);
  }
}

// ============================================
// MENU ANIMATIONS
// ============================================

#adminmenu {
  .wp-submenu {
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    transform-origin: left center;

    &:not(.opensub) {
      opacity: 0;
      transform: translateX(-10px) scale(0.95);
      pointer-events: none;
    }
  }

  li.menu-top.opensub .wp-submenu {
    opacity: 1;
    transform: translateX(0) scale(1);
    pointer-events: auto;
    animation: sarika-submenu-slide 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
}

@keyframes sarika-submenu-slide {
  from {
    opacity: 0;
    transform: translateX(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

// ============================================
// ADMIN BAR ANIMATIONS
// ============================================

#wpadminbar {
  .ab-submenu {
    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    transform-origin: top center;

    a {
      transition: all var(--sarika-transition-fast, 0.15s) ease;
      position: relative;

      &::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        width: 3px;
        height: 0;
        background: var(--sarika-color-accent, #e0ddcf);
        transition: all 0.2s ease;
        transform: translateY(-50%);
      }

      &:hover::before {
        height: 60%;
      }
    }
  }
}

// ============================================
// DASHBOARD WIDGET ANIMATIONS
// ============================================

#dashboard-widgets {
  .postbox {
    &.closed {
      .inside {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }
    }

    &:not(.closed) {
      .inside {
        max-height: 2000px;
        transition: max-height 0.3s ease-out;
      }
    }
  }
}

// ============================================
// LOADING SPINNER ENHANCEMENT
// ============================================

.spinner {
  &.is-active {
    animation: sarika-spinner-fade-in 0.2s ease-out;
  }
}

@keyframes sarika-spinner-fade-in {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

// ============================================
// RESPONSIVE ADJUSTMENTS
// ============================================

@media (max-width: 782px) {
  // Reduce animation intensity on mobile for performance
  .sarika-animate-in {
    animation-duration: 0.3s;
  }

  .sarika-page-exit .wrap {
    animation-duration: 0.2s;
  }

  // Disable parallax on mobile
  .wrap > h1,
  .wrap > h2 {
    transform: none !important;
  }
}

// Respect user's motion preferences
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
